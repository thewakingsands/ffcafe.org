(this["webpackJsonpmarket-overlay-react"]=this["webpackJsonpmarket-overlay-react"]||[]).push([[0],{11:function(e,t,n){e.exports=n(18)},16:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),i=n.n(c),u=(n(16),n(3)),l=n(9),o=n(4),s=n(10),d=(n(17),/[\?&]OVERLAY_WS=([^&]+)/.exec(window.location.href)),f=null,m=[],v={},y={},h=null,p=!1;if(d){h=function(e){m?m.push(e):f.send(JSON.stringify(e))},function e(){(f=new WebSocket(d[1])).addEventListener("error",(function(e){console.error(e)})),f.addEventListener("open",(function(){console.log("Connected!");var e=m;m=null;var t,n=Object(u.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;h(a)}}catch(r){n.e(r)}finally{n.f()}})),f.addEventListener("message",(function(e){try{e=JSON.parse(e.data)}catch(t){return void console.error("Invalid message received: ",e)}void 0!==e.rseq&&v[e.rseq]?(v[e.rseq](e),delete v[e.rseq]):g(e)})),f.addEventListener("close",(function(){m=[],console.log("Trying to reconnect..."),setTimeout((function(){e()}),300)}))}()}else{h=function(e,t){m?m.push([e,t]):OverlayPluginApi.callHandler(JSON.stringify(e),t)},function e(){if(window.OverlayPluginApi&&window.OverlayPluginApi.ready){var t=m;m=null,window.__OverlayCallback=g;var n,a=Object(u.a)(t);try{for(a.s();!(n=a.n()).done;){var r=Object(o.a)(n.value,2),c=r[0],i=r[1];h(c,i)}}catch(l){a.e(l)}finally{a.f()}}else setTimeout(e,300)}()}function g(e){if(y[e.type]){var t,n=Object(u.a)(y[e.type]);try{for(n.s();!(t=n.n()).done;){(0,t.value)(e)}}catch(a){n.e(a)}finally{n.f()}}}var b=n(1),O=Object(b.c)({price:0,quantity:0,hq:0}),q=Object(b.c)({id:0,name:"",rows:Object(b.b)()}),E="00:0000:Matcha-MarketBoard:";function j(e,t){return t.reduce((function(e,t){var n=Object(o.a)(t,3),a=n[0],r=n[1],c=n[2],i=e.findIndex((function(e){return e.get("price")===a}));return-1===i?e.push(O({price:a,quantity:r,hq:c?r:0})):e.update(i,(function(e){return e.update("quantity",(function(e){return e+r})).update("hq",(function(e){return e+(c?r:0)}))}))}),e)}var w=function(){var e=Object(a.useState)(Object(b.a)()),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(Object(b.a)()),d=Object(o.a)(i,2),f=d[0],m=d[1];return Object(a.useEffect)((function(){var e,t,n=function(e){var t=function(e){var t=e.indexOf(" ");if(-1===t)return null;if(e.substr(t+1,E.length)!==E)return null;var n=e.substr(t+1+E.length);if("$"===n[0])return{type:"command",command:n.substr(1)};try{var a=JSON.parse(n),r=Object(s.a)(a);return{type:"data",mode:r[0],server:{id:r[1],name:r[2]},item:{id:r[3],name:r[4]},data:r.slice(5)}}catch(c){return null}}(e);null!==t&&("command"===t.type?"reset"===t.command&&(c((function(e){return e.clear()})),m((function(e){return e.clear()}))):"data"===t.type&&(c((function(e){return e.find((function(e){return e.id===t.server.id}))?e:e.push(t.server)})),m((function(e){var n=e.findIndex((function(e){return e.get("id")===t.item.id}));return-1===n?"data"!==t.mode?e:e.push(q(Object(l.a)({},t.item,{rows:Object(b.b)().set(t.server.id,j(Object(b.a)(),t.data))}))):e.update(n,(function(e){return e.update("rows",(function(e){return"count"===t.mode?e.set(t.server.id,Object(b.a)()):e.has(t.server.id)?e.update(t.server.id,(function(e){return j(e,t.data)})):e.set(t.server.id,j(Object(b.a)(),t.data))}))}))}))))};e="onLogEvent",t=function(e){if(e.detail&&e.detail.logs){var t,a=Object(u.a)(e.detail.logs);try{for(a.s();!(t=a.n()).done;){var r=t.value;n(r)}}catch(c){a.e(c)}finally{a.f()}}},p&&y[e]&&console.warn("A new listener for ".concat(e," has been registered after event transmission has already begun.\nSome events might have been missed and no cached values will be transmitted.\nPlease register your listeners before calling startOverlayEvents().")),y[e]||(y[e]=[]),y[e].push(t),p=!1,h({call:"subscribe",events:Object.keys(y)})}),[]),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"logo",style:{width:100}},"Matcha"),f.map((function(e){return r.a.createElement("th",{key:e.get("id")},e.get("name"))})))),r.a.createElement("tbody",null,n.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("th",null,e.name),f.map((function(t){var n="".concat(e.id,"-").concat(t.get("id")),a=t.get("rows").get(e.id);if(!a||0===a.count())return r.a.createElement("td",{key:n,className:"no-record"},"-");var c=a.get(0).toJS(),i=a.reduce((function(e,t){if(e.quantity>=99)return e;var n=t.get("quantity");return{totalPrice:e.totalPrice+t.get("price")*n,quantity:e.quantity+n,hq:e.hq+t.get("hq")}}),{totalPrice:0,quantity:0,hq:0}),u=t.get("rows").every((function(e){var t=e.get(0);return!t||t.get("price")>=c.price}));return r.a.createElement("td",{key:n,className:u?"lowest":""},r.a.createElement("div",{className:"single"},c.price.toLocaleString(),r.a.createElement("span",{className:"quantity"},"[",c.quantity,c.hq?r.a.createElement("span",{className:"hq"},"(",c.hq,r.a.createElement("img",{src:"hq-white",alt:"HQ"}),")"):null,"]")),r.a.createElement("div",{className:"group"},(i.totalPrice/i.quantity).toLocaleString(void 0,{maximumFractionDigits:0}),r.a.createElement("span",{className:"quantity"},"[",i.quantity,i.hq?r.a.createElement("span",{className:"hq"},"(",i.hq,r.a.createElement("img",{src:"hq-white",alt:"HQ"}),")"):null,"]")))})))}))))};i.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[11,1,2]]]);